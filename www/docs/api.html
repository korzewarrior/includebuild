<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API Reference | IncludeBuild</title>
    <link rel="stylesheet" href="../css/styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    <link rel="icon" type="image/svg+xml" href="../images/favicon.svg">
    <script src="../js/nav.js"></script>
</head>
<body>
    <header>
        <nav>
            <!-- Navigation will be loaded here by JavaScript -->
        </nav>
    </header>

    <section class="examples-hero">
        <div class="container">
            <h1>API Reference</h1>
            <p class="tagline">Complete documentation of IncludeBuild functions and types</p>
        </div>
    </section>

    <section id="api-content">
        <div class="container">
            <div class="faq-categories api-categories">
                <a href="#core-functions" class="faq-category active" data-section="core-functions">Core Functions</a>
                <a href="#configuration" class="faq-category" data-section="configuration">Configuration</a>
                <a href="#libraries" class="faq-category" data-section="libraries">Libraries</a>
                <a href="#logging" class="faq-category" data-section="logging">Logging</a>
                <a href="#library-building" class="faq-category" data-section="library-building">Library Building</a>
                <a href="#advanced" class="faq-category" data-section="advanced">Advanced</a>
            </div>

            <div class="faq-container api-container">
                <!-- Core Functions -->
                <div id="core-functions" class="faq-section api-section active">
                    <h2>Core Functions</h2>
                    
                    <div class="faq-item api-function-item">
                        <div class="faq-question">
                            <h3>ib_init</h3>
                            <p class="api-brief">Initializes IncludeBuild with default settings.</p>
                            <span class="faq-toggle"></span>
                        </div>
                        <div class="faq-answer">
                            <pre class="function-signature"><code>void ib_init(void)</code></pre>
                            <div class="api-example">
                                <h4>Example:</h4>
                                <pre><code>ib_init();</code></pre>
                            </div>
                        </div>
                    </div>

                    <div class="faq-item api-function-item">
                        <div class="faq-question">
                            <h3>ib_build</h3>
                            <p class="api-brief">Builds the project. Automatically finds source files, resolves dependencies, and compiles what's needed.</p>
                            <span class="faq-toggle"></span>
                        </div>
                        <div class="faq-answer">
                            <pre class="function-signature"><code>bool ib_build(void)</code></pre>
                            <div class="api-returns">
                                <h4>Returns:</h4>
                                <p><code>true</code> if the build was successful, <code>false</code> otherwise.</p>
                            </div>
                            <div class="api-example">
                                <h4>Example:</h4>
                                <pre><code>if (!ib_build()) {
    printf("Build failed!\n");
    return 1;
}</code></pre>
                            </div>
                        </div>
                    </div>

                    <div class="faq-item api-function-item">
                        <div class="faq-question">
                            <h3>ib_clean</h3>
                            <p class="api-brief">Cleans up all build artifacts.</p>
                            <span class="faq-toggle"></span>
                        </div>
                        <div class="faq-answer">
                            <pre class="function-signature"><code>void ib_clean(void)</code></pre>
                            <div class="api-example">
                                <h4>Example:</h4>
                                <pre><code>ib_clean();</code></pre>
                            </div>
                        </div>
                    </div>

                    <div class="faq-item api-function-item">
                        <div class="faq-question">
                            <h3>ib_add_target</h3>
                            <p class="api-brief">Adds a specific build target with a main source file.</p>
                            <span class="faq-toggle"></span>
                        </div>
                        <div class="faq-answer">
                            <pre class="function-signature"><code>void ib_add_target(const char* name, const char* main_source)</code></pre>
                            <div class="api-params">
                                <h4>Parameters:</h4>
                                <ul>
                                    <li><code>name</code>: Name of the target (output executable name).</li>
                                    <li><code>main_source</code>: Path to the main source file.</li>
                                </ul>
                            </div>
                            <div class="api-example">
                                <h4>Example:</h4>
                                <pre><code>ib_add_target("my_app", "main.c");</code></pre>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Configuration Section -->
                <div id="configuration" class="faq-section api-section">
                    <h2>Configuration</h2>
                    
                    <div class="faq-item api-function-item">
                        <div class="faq-question">
                            <h3>ib_add_include_dir</h3>
                            <p class="api-brief">Adds a directory to the include search path.</p>
                            <span class="faq-toggle"></span>
                        </div>
                        <div class="faq-answer">
                            <pre class="function-signature"><code>void ib_add_include_dir(const char* dir)</code></pre>
                            <div class="api-params">
                                <h4>Parameters:</h4>
                                <ul>
                                    <li><code>dir</code>: Path to the directory to include.</li>
                                </ul>
                            </div>
                            <div class="api-example">
                                <h4>Example:</h4>
                                <pre><code>ib_add_include_dir("include");</code></pre>
                            </div>
                        </div>
                    </div>
                    
                    <div class="faq-item api-function-item">
                        <div class="faq-question">
                            <h3>ib_exclude_file</h3>
                            <p class="api-brief">Excludes a file or pattern from the build.</p>
                            <span class="faq-toggle"></span>
                        </div>
                        <div class="faq-answer">
                            <pre class="function-signature"><code>void ib_exclude_file(const char* file)</code></pre>
                            <div class="api-params">
                                <h4>Parameters:</h4>
                                <ul>
                                    <li><code>file</code>: File path or pattern (e.g., "test_*.c") to exclude.</li>
                                </ul>
                            </div>
                            <div class="api-example">
                                <h4>Example:</h4>
                                <pre><code>ib_exclude_file("test_*.c");  // Exclude all test files
ib_exclude_file("build.c");   // Exclude the build script itself</code></pre>
                            </div>
                        </div>
                    </div>

                    <div class="faq-item api-function-item">
                        <div class="faq-question">
                            <h3>ib_reset_config</h3>
                            <p class="api-brief">Resets the build configuration to default values.</p>
                            <span class="faq-toggle"></span>
                        </div>
                        <div class="faq-answer">
                            <pre class="function-signature"><code>void ib_reset_config(void)</code></pre>
                            <div class="api-example">
                                <h4>Example:</h4>
                                <pre><code>ib_reset_config();  // Reset to defaults</code></pre>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Libraries Section -->
                <div id="libraries" class="faq-section api-section">
                    <h2>Libraries</h2>
                    
                    <div class="faq-item api-function-item">
                        <div class="faq-question">
                            <h3>ib_add_library</h3>
                            <p class="api-brief">Adds a library to link with.</p>
                            <span class="faq-toggle"></span>
                        </div>
                        <div class="faq-answer">
                            <pre class="function-signature"><code>void ib_add_library(const char* library)</code></pre>
                            <div class="api-params">
                                <h4>Parameters:</h4>
                                <ul>
                                    <li><code>library</code>: Name of the library to link with (without "lib" prefix or file extension)</li>
                                </ul>
                            </div>
                            <div class="api-example">
                                <h4>Example:</h4>
                                <pre><code>ib_add_library("m");      // Link with the math library
ib_add_library("pthread"); // Link with the pthread library</code></pre>
                            </div>
                        </div>
                    </div>

                    <div class="faq-item api-function-item">
                        <div class="faq-question">
                            <h3>ib_add_libraries</h3>
                            <p class="api-brief">Adds multiple libraries to link with in a single call.</p>
                            <span class="faq-toggle"></span>
                        </div>
                        <div class="faq-answer">
                            <pre class="function-signature"><code>void ib_add_libraries(const char* first, ...)</code></pre>
                            <div class="api-params">
                                <h4>Parameters:</h4>
                                <ul>
                                    <li><code>first</code>: Name of the first library to link with</li>
                                    <li><code>...</code>: Additional libraries (must end with NULL)</li>
                                </ul>
                            </div>
                            <div class="api-example">
                                <h4>Example:</h4>
                                <pre><code>ib_add_libraries("m", "pthread", "dl", NULL);</code></pre>
                            </div>
                        </div>
                    </div>

                    <div class="faq-item api-function-item">
                        <div class="faq-question">
                            <h3>ib_add_library_path</h3>
                            <p class="api-brief">Adds a directory to search for libraries.</p>
                            <span class="faq-toggle"></span>
                        </div>
                        <div class="faq-answer">
                            <pre class="function-signature"><code>void ib_add_library_path(const char* path)</code></pre>
                            <div class="api-params">
                                <h4>Parameters:</h4>
                                <ul>
                                    <li><code>path</code>: Path to the directory containing libraries</li>
                                </ul>
                            </div>
                            <div class="api-example">
                                <h4>Example:</h4>
                                <pre><code>ib_add_library_path("lib");
ib_add_library_path("/usr/local/lib");</code></pre>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Logging Section -->
                <div id="logging" class="faq-section api-section">
                    <h2>Logging</h2>
                    
                    <div class="faq-item api-function-item">
                        <div class="faq-question">
                            <h3>ib_set_log_level</h3>
                            <p class="api-brief">Sets the logging verbosity level.</p>
                            <span class="faq-toggle"></span>
                        </div>
                        <div class="faq-answer">
                            <pre class="function-signature"><code>void ib_set_log_level(ib_log_level level)</code></pre>
                            <div class="api-params">
                                <h4>Parameters:</h4>
                                <ul>
                                    <li><code>level</code>: The log level to set (IB_LOG_ERROR, IB_LOG_WARN, IB_LOG_INFO, or IB_LOG_DEBUG)</li>
                                </ul>
                            </div>
                            <div class="api-example">
                                <h4>Example:</h4>
                                <pre><code>ib_set_log_level(IB_LOG_DEBUG); // Most verbose</code></pre>
                            </div>
                        </div>
                    </div>
                    
                    <div class="faq-item api-function-item">
                        <div class="faq-question">
                            <h3>ib_set_verbose</h3>
                            <p class="api-brief">Enables or disables verbose output.</p>
                            <span class="faq-toggle"></span>
                        </div>
                        <div class="faq-answer">
                            <pre class="function-signature"><code>void ib_set_verbose(bool verbose)</code></pre>
                            <div class="api-params">
                                <h4>Parameters:</h4>
                                <ul>
                                    <li><code>verbose</code>: Whether to enable verbose output (true) or not (false)</li>
                                </ul>
                            </div>
                            <div class="api-example">
                                <h4>Example:</h4>
                                <pre><code>ib_set_verbose(true); // Enable detailed build information</code></pre>
                            </div>
                        </div>
                    </div>

                    <div class="faq-item api-function-item">
                        <div class="faq-question">
                            <h3>Log Levels</h3>
                            <p class="api-brief">Enumeration of available log levels.</p>
                            <span class="faq-toggle"></span>
                        </div>
                        <div class="faq-answer">
                            <pre class="function-signature"><code>typedef enum {
    IB_LOG_ERROR = 0,  // Only error messages 
    IB_LOG_WARN = 1,   // Warnings and errors
    IB_LOG_INFO = 2,   // Info, warnings, and errors (default)
    IB_LOG_DEBUG = 3   // All messages including debug information
} ib_log_level;</code></pre>
                        </div>
                    </div>
                </div>

                <!-- Library Building Section -->
                <div id="library-building" class="faq-section api-section">
                    <h2>Library Building</h2>
                    
                    <div class="faq-item api-function-item">
                        <div class="faq-question">
                            <h3>ib_build_library</h3>
                            <p class="api-brief">Automatic "magic" function that builds a complete library project including static lib, shared lib, and tests.</p>
                            <span class="faq-toggle"></span>
                        </div>
                        <div class="faq-answer">
                            <pre class="function-signature"><code>bool ib_build_library(const char* library_name, int argc, char** argv)</code></pre>
                            <div class="api-params">
                                <h4>Parameters:</h4>
                                <ul>
                                    <li><code>library_name</code>: Base name of the library (e.g., "logger" creates "liblogger.a/so")</li>
                                    <li><code>argc</code>: Number of command line arguments (from main)</li>
                                    <li><code>argv</code>: Command line arguments (from main)</li>
                                </ul>
                            </div>
                            <div class="api-returns">
                                <h4>Returns:</h4>
                                <p><code>true</code> if the build was successful, <code>false</code> otherwise.</p>
                            </div>
                            <div class="api-example">
                                <h4>Example:</h4>
                                <pre><code>int main(int argc, char** argv) {
    ib_init();
    
    // Build the library with all its components
    return ib_build_library("logger", argc, argv) ? 0 : 1;
}</code></pre>
                            </div>
                        </div>
                    </div>

                    <div class="faq-item api-function-item">
                        <div class="faq-question">
                            <h3>ib_build_static_library</h3>
                            <p class="api-brief">Builds a static library (.a) from the specified source.</p>
                            <span class="faq-toggle"></span>
                        </div>
                        <div class="faq-answer">
                            <pre class="function-signature"><code>bool ib_build_static_library(const char* name, const char* main_source, const char* exclude_file)</code></pre>
                            <div class="api-params">
                                <h4>Parameters:</h4>
                                <ul>
                                    <li><code>name</code>: Name of the library (without "lib" prefix or ".a" extension)</li>
                                    <li><code>main_source</code>: Path to the main source file</li>
                                    <li><code>exclude_file</code>: File pattern to exclude (or NULL)</li>
                                </ul>
                            </div>
                            <div class="api-returns">
                                <h4>Returns:</h4>
                                <p><code>true</code> if the build was successful, <code>false</code> otherwise.</p>
                            </div>
                            <div class="api-example">
                                <h4>Example:</h4>
                                <pre><code>ib_build_static_library("math", "src/math.c", "test_*.c");</code></pre>
                            </div>
                        </div>
                    </div>

                    <div class="faq-item api-function-item">
                        <div class="faq-question">
                            <h3>ib_build_dynamic_library</h3>
                            <p class="api-brief">Builds a dynamic/shared library (.so/.dll) from the specified source.</p>
                            <span class="faq-toggle"></span>
                        </div>
                        <div class="faq-answer">
                            <pre class="function-signature"><code>bool ib_build_dynamic_library(const char* name, const char* main_source, const char* exclude_file)</code></pre>
                            <div class="api-params">
                                <h4>Parameters:</h4>
                                <ul>
                                    <li><code>name</code>: Name of the library (without "lib" prefix or extension)</li>
                                    <li><code>main_source</code>: Path to the main source file</li>
                                    <li><code>exclude_file</code>: File pattern to exclude (or NULL)</li>
                                </ul>
                            </div>
                            <div class="api-returns">
                                <h4>Returns:</h4>
                                <p><code>true</code> if the build was successful, <code>false</code> otherwise.</p>
                            </div>
                            <div class="api-example">
                                <h4>Example:</h4>
                                <pre><code>ib_build_dynamic_library("math", "src/math.c", "test_*.c");</code></pre>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Advanced Section -->
                <div id="advanced" class="faq-section api-section">
                    <h2>Advanced</h2>
                    
                    <div class="faq-item api-function-item">
                        <div class="faq-question">
                            <h3>ib_init_with_config</h3>
                            <p class="api-brief">Initializes IncludeBuild with a custom configuration.</p>
                            <span class="faq-toggle"></span>
                        </div>
                        <div class="faq-answer">
                            <pre class="function-signature"><code>void ib_init_with_config(const ib_config* config)</code></pre>
                            <div class="api-params">
                                <h4>Parameters:</h4>
                                <ul>
                                    <li><code>config</code>: Pointer to a custom configuration structure</li>
                                </ul>
                            </div>
                            <div class="api-example">
                                <h4>Example:</h4>
                                <pre><code>ib_config custom_config = {0};
strcpy(custom_config.compiler, "clang");
strcpy(custom_config.compiler_flags, "-Wall -O3");
ib_init_with_config(&custom_config);</code></pre>
                            </div>
                        </div>
                    </div>
                    
                    <div class="faq-item api-function-item">
                        <div class="faq-question">
                            <h3>ib_version</h3>
                            <p class="api-brief">Gets the version string of IncludeBuild.</p>
                            <span class="faq-toggle"></span>
                        </div>
                        <div class="faq-answer">
                            <pre class="function-signature"><code>const char* ib_version(void)</code></pre>
                            <div class="api-returns">
                                <h4>Returns:</h4>
                                <p>String with the version of IncludeBuild.</p>
                            </div>
                            <div class="api-example">
                                <h4>Example:</h4>
                                <pre><code>printf("Using IncludeBuild version: %s\n", ib_version());</code></pre>
                            </div>
                        </div>
                    </div>
                    
                    <div class="faq-item api-function-item">
                        <div class="faq-question">
                            <h3>Customizable Limits</h3>
                            <p class="api-brief">Constants that can be defined before including build.h to customize limits.</p>
                            <span class="faq-toggle"></span>
                        </div>
                        <div class="faq-answer">
                            <pre class="function-signature"><code>#define IB_MAX_PATH 1024      // Maximum path length
#define IB_MAX_CMD 4096        // Maximum command length
#define IB_MAX_FILES 1000      // Maximum number of files
#define IB_MAX_DEPS 100        // Maximum dependencies per file
#define IB_MAX_INCLUDE_DIRS 50 // Maximum include directories</code></pre>
                            <div class="api-example">
                                <h4>Example:</h4>
                                <pre><code>// Define custom limits before including build.h
#define IB_MAX_FILES 2000     // Support more files
#define IB_MAX_DEPS 200       // Support more dependencies
#define IB_MAX_INCLUDE_DIRS 100 // Support more include dirs

#include "build.h"</code></pre>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="cta-section">
        <!-- CTA will be loaded here by JavaScript -->
    </section>

    <footer>
        <div class="container">
            <div class="footer-logo">
                <a href="../index.html">
                    <span class="include">#include</span><span class="build">"build.h"</span>
                </a>
                <p class="footer-tagline">The only build system that feels like part of the language</p>
            </div>
            <div class="footer-links">
                <div class="footer-column">
                    <h4>Product</h4>
                    <ul>
                        <li><a href="../index.html#features">Features</a></li>
                        <li><a href="../index.html#comparison">Comparison</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h4>Resources</h4>
                    <ul>
                        <li><a href="../index.html#get-started">Quick Start</a></li>
                        <li><a href="../index.html#docs">Documentation</a></li>
                        <li><a href="../index.html#docs">User Guide</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h4>Community</h4>
                    <ul>
                        <li><a href="https://github.com/korzewarrior/includebuild/blob/master/CONTRIBUTING.md">Contributing</a></li>
                        <li><a href="mailto:build@includebuild.com">build@includebuild.com</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 IncludeBuild. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script src="../js/main.js"></script>
    <script>
        // Load the CTA section
        document.addEventListener('DOMContentLoaded', function() {
            const ctaSection = document.querySelector('.cta-section');
            fetch('../includes/cta.html')
                .then(response => response.text())
                .then(html => {
                    ctaSection.innerHTML = html;
                })
                .catch(error => {
                    console.error('Error loading CTA section:', error);
                });
                
            // Handle category tabs
            const categories = document.querySelectorAll('.faq-category');
            
            categories.forEach(category => {
                category.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    // Remove active class from all categories
                    categories.forEach(c => c.classList.remove('active'));
                    
                    // Add active class to clicked category
                    this.classList.add('active');
                    
                    // Hide all sections
                    const sections = document.querySelectorAll('.faq-section');
                    sections.forEach(s => s.classList.remove('active'));
                    
                    // Show the corresponding section
                    const sectionId = this.getAttribute('data-section');
                    document.getElementById(sectionId).classList.add('active');
                });
            });
            
            // Make the entire question header clickable, not just the toggle
            const questionHeaders = document.querySelectorAll('.faq-question');
            questionHeaders.forEach(header => {
                header.addEventListener('click', function() {
                    const item = this.closest('.faq-item');
                    item.classList.toggle('active');
                });
            });
        });
    </script>
</body>
</html> 