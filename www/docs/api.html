<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API Reference | IncludeBuild</title>
    <link rel="stylesheet" href="../css/styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    <link rel="icon" type="image/svg+xml" href="../images/favicon.svg">
    <script src="../js/nav.js"></script>
</head>
<body>
    <header>
        <nav>
            <!-- Navigation will be loaded here by JavaScript -->
        </nav>
    </header>

    <section class="examples-hero">
        <div class="container">
            <h1>API Reference</h1>
            <p class="tagline">Complete documentation of IncludeBuild functions and types</p>
        </div>
    </section>

    <section id="api-content">
        <div class="container">
            <div class="faq-categories api-categories">
                <a href="#workspace-management" class="faq-category active" data-section="workspace-management">Workspace Management</a>
                <a href="#source-files" class="faq-category" data-section="source-files">Source Files</a>
                <a href="#compilation" class="faq-category" data-section="compilation">Compilation</a>
                <a href="#libraries" class="faq-category" data-section="libraries">Libraries</a>
                <a href="#flags" class="faq-category" data-section="flags">Compiler & Linker Flags</a>
                <a href="#output" class="faq-category" data-section="output">Output Config</a>
                <a href="#logging" class="faq-category" data-section="logging">Logging</a>
                <a href="#error-handling" class="faq-category" data-section="error-handling">Error Handling</a>
            </div>

            <div class="faq-container api-container">
                <!-- Workspace Management -->
                <div id="workspace-management" class="faq-section api-section active">
                    <h2>Workspace Management</h2>
                    
                    <div class="faq-item api-function-item">
                        <div class="faq-question">
                            <h3>ib_create_workspace</h3>
                            <p class="api-brief">Creates a new IncludeBuild workspace. The workspace is the main structure used to manage build configuration.</p>
                            <span class="faq-toggle"></span>
                        </div>
                        <div class="faq-answer">
                            <pre class="function-signature"><code>ib_workspace_t ib_create_workspace(void)</code></pre>
                            <div class="api-returns">
                                <h4>Returns:</h4>
                                <p>A new workspace instance.</p>
                            </div>
                            <div class="api-example">
                                <h4>Example:</h4>
                                <pre><code><span class="keyword">ib_workspace_t</span> ws = ib_create_workspace();</code></pre>
                            </div>
                        </div>
                    </div>

                    <div class="faq-item api-function-item">
                        <div class="faq-question">
                            <h3>ib_destroy_workspace</h3>
                            <p class="api-brief">Destroys a workspace and frees all associated resources.</p>
                            <span class="faq-toggle"></span>
                        </div>
                        <div class="faq-answer">
                            <pre class="function-signature"><code>void ib_destroy_workspace(ib_workspace_t workspace)</code></pre>
                            <div class="api-params">
                                <h4>Parameters:</h4>
                                <ul>
                                    <li><code>workspace</code>: The workspace to destroy.</li>
                                </ul>
                            </div>
                            <div class="api-example">
                                <h4>Example:</h4>
                                <pre><code>ib_destroy_workspace(ws);</code></pre>
                            </div>
                        </div>
                    </div>

                    <div class="faq-item api-function-item">
                        <div class="faq-question">
                            <h3>ib_reset_workspace</h3>
                            <p class="api-brief">Resets a workspace to its initial state, clearing all configuration while maintaining the same workspace instance.</p>
                            <span class="faq-toggle"></span>
                        </div>
                        <div class="faq-answer">
                            <pre class="function-signature"><code>void ib_reset_workspace(ib_workspace_t workspace)</code></pre>
                            <div class="api-params">
                                <h4>Parameters:</h4>
                                <ul>
                                    <li><code>workspace</code>: The workspace to reset.</li>
                                </ul>
                            </div>
                            <div class="api-example">
                                <h4>Example:</h4>
                                <pre><code>ib_reset_workspace(ws);</code></pre>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Source Files -->
                <div id="source-files" class="faq-section api-section">
                    <h2>Source Files</h2>
                    
                    <div class="faq-item api-function-item">
                        <div class="faq-question">
                            <h3>ib_add_source_file</h3>
                            <p class="api-brief">Adds a source file to the workspace for compilation.</p>
                            <span class="faq-toggle"></span>
                        </div>
                        <div class="faq-answer">
                            <pre class="function-signature"><code>bool ib_add_source_file(ib_workspace_t workspace, const char* file_path)</code></pre>
                            <div class="api-params">
                                <h4>Parameters:</h4>
                                <ul>
                                    <li><code>workspace</code>: The workspace instance.</li>
                                    <li><code>file_path</code>: Path to the source file.</li>
                                </ul>
                            </div>
                            <div class="api-returns">
                                <h4>Returns:</h4>
                                <p><code>true</code> if the file was added successfully, <code>false</code> otherwise.</p>
                            </div>
                            <div class="api-example">
                                <h4>Example:</h4>
                                <pre><code>ib_add_source_file(ws, <span class="string">"src/main.c"</span>);</code></pre>
                            </div>
                        </div>
                    </div>

                    <div class="faq-item api-function-item">
                        <div class="faq-question">
                            <h3>ib_add_source_directory</h3>
                            <p class="api-brief">Adds all source files in a directory to the workspace.</p>
                            <span class="faq-toggle"></span>
                        </div>
                        <div class="faq-answer">
                            <pre class="function-signature"><code>bool ib_add_source_directory(ib_workspace_t workspace, const char* directory_path, bool recursive)</code></pre>
                            <div class="api-params">
                                <h4>Parameters:</h4>
                                <ul>
                                    <li><code>workspace</code>: The workspace instance.</li>
                                    <li><code>directory_path</code>: Path to the directory containing source files.</li>
                                    <li><code>recursive</code>: If <code>true</code>, includes files in subdirectories.</li>
                                </ul>
                            </div>
                            <div class="api-returns">
                                <h4>Returns:</h4>
                                <p><code>true</code> if the directory was processed successfully, <code>false</code> otherwise.</p>
                            </div>
                            <div class="api-example">
                                <h4>Example:</h4>
                                <pre><code>ib_add_source_directory(ws, <span class="string">"src"</span>, <span class="keyword">true</span>);</code></pre>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Compilation -->
                <div id="compilation" class="faq-section api-section">
                    <h2>Compilation</h2>
                    
                    <div class="faq-item api-function-item">
                        <div class="faq-question">
                            <h3>ib_build</h3>
                            <p class="api-brief">Builds the project with the current workspace configuration.</p>
                            <span class="faq-toggle"></span>
                        </div>
                        <div class="faq-answer">
                            <pre class="function-signature"><code>bool ib_build(ib_workspace_t workspace)</code></pre>
                            <div class="api-params">
                                <h4>Parameters:</h4>
                                <ul>
                                    <li><code>workspace</code>: The workspace instance.</li>
                                </ul>
                            </div>
                            <div class="api-returns">
                                <h4>Returns:</h4>
                                <p><code>true</code> if the build was successful, <code>false</code> otherwise.</p>
                            </div>
                            <div class="api-example">
                                <h4>Example:</h4>
                                <pre><code><span class="keyword">if</span> (!ib_build(ws)) {
    printf(<span class="string">"Build failed: %s\n"</span>, ib_get_last_error(ws));
    <span class="keyword">return</span> 1;
}</code></pre>
                            </div>
                        </div>
                    </div>

                    <div class="faq-item api-function-item">
                        <div class="faq-question">
                            <h3>ib_clean</h3>
                            <p class="api-brief">Cleans build artifacts for the current workspace.</p>
                            <span class="faq-toggle"></span>
                        </div>
                        <div class="faq-answer">
                            <pre class="function-signature"><code>bool ib_clean(ib_workspace_t workspace)</code></pre>
                            <div class="api-params">
                                <h4>Parameters:</h4>
                                <ul>
                                    <li><code>workspace</code>: The workspace instance.</li>
                                </ul>
                            </div>
                            <div class="api-returns">
                                <h4>Returns:</h4>
                                <p><code>true</code> if cleaning was successful, <code>false</code> otherwise.</p>
                            </div>
                            <div class="api-example">
                                <h4>Example:</h4>
                                <pre><code>ib_clean(ws);</code></pre>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Libraries -->
                <div id="libraries" class="faq-section api-section">
                    <h2>Libraries</h2>
                    
                    <div class="faq-item api-function-item">
                        <div class="faq-question">
                            <h3>ib_add_library</h3>
                            <p class="api-brief">Adds a library to link against.</p>
                            <span class="faq-toggle"></span>
                        </div>
                        <div class="faq-answer">
                            <pre class="function-signature"><code>bool ib_add_library(ib_workspace_t workspace, const char* library_name, const char* search_path)</code></pre>
                            <div class="api-params">
                                <h4>Parameters:</h4>
                                <ul>
                                    <li><code>workspace</code>: The workspace instance.</li>
                                    <li><code>library_name</code>: Name of the library (without the "lib" prefix or file extension).</li>
                                    <li><code>search_path</code>: Optional search path for the library. Pass <code>NULL</code> to use system paths.</li>
                                </ul>
                            </div>
                            <div class="api-returns">
                                <h4>Returns:</h4>
                                <p><code>true</code> if the library was added successfully, <code>false</code> otherwise.</p>
                            </div>
                            <div class="api-example">
                                <h4>Example:</h4>
                                <pre><code>ib_add_library(ws, <span class="string">"pthread"</span>, <span class="keyword">NULL</span>);</code></pre>
                            </div>
                        </div>
                    </div>

                    <div class="faq-item api-function-item">
                        <div class="faq-question">
                            <h3>ib_add_library_dir</h3>
                            <p class="api-brief">Adds a directory to search for libraries.</p>
                            <span class="faq-toggle"></span>
                        </div>
                        <div class="faq-answer">
                            <pre class="function-signature"><code>bool ib_add_library_dir(ib_workspace_t workspace, const char* directory_path)</code></pre>
                            <div class="api-params">
                                <h4>Parameters:</h4>
                                <ul>
                                    <li><code>workspace</code>: The workspace instance.</li>
                                    <li><code>directory_path</code>: Path to the directory containing libraries.</li>
                                </ul>
                            </div>
                            <div class="api-returns">
                                <h4>Returns:</h4>
                                <p><code>true</code> if the directory was added successfully, <code>false</code> otherwise.</p>
                            </div>
                            <div class="api-example">
                                <h4>Example:</h4>
                                <pre><code>ib_add_library_dir(ws, <span class="string">"/usr/local/lib"</span>);</code></pre>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Compiler and Linker Flags -->
                <div id="flags" class="faq-section api-section">
                    <h2>Compiler and Linker Flags</h2>
                    
                    <div class="faq-item api-function-item">
                        <div class="faq-question">
                            <h3>ib_add_compiler_flag</h3>
                            <p class="api-brief">Adds a compiler flag to use during compilation.</p>
                            <span class="faq-toggle"></span>
                        </div>
                        <div class="faq-answer">
                            <pre class="function-signature"><code>bool ib_add_compiler_flag(ib_workspace_t workspace, const char* flag)</code></pre>
                            <div class="api-params">
                                <h4>Parameters:</h4>
                                <ul>
                                    <li><code>workspace</code>: The workspace instance.</li>
                                    <li><code>flag</code>: The compiler flag to add.</li>
                                </ul>
                            </div>
                            <div class="api-returns">
                                <h4>Returns:</h4>
                                <p><code>true</code> if the flag was added successfully, <code>false</code> otherwise.</p>
                            </div>
                            <div class="api-example">
                                <h4>Example:</h4>
                                <pre><code>ib_add_compiler_flag(ws, <span class="string">"-Wall"</span>);
ib_add_compiler_flag(ws, <span class="string">"-O2"</span>);</code></pre>
                            </div>
                        </div>
                    </div>

                    <div class="faq-item api-function-item">
                        <div class="faq-question">
                            <h3>ib_add_linker_flag</h3>
                            <p class="api-brief">Adds a linker flag to use during linking.</p>
                            <span class="faq-toggle"></span>
                        </div>
                        <div class="faq-answer">
                            <pre class="function-signature"><code>bool ib_add_linker_flag(ib_workspace_t workspace, const char* flag)</code></pre>
                            <div class="api-params">
                                <h4>Parameters:</h4>
                                <ul>
                                    <li><code>workspace</code>: The workspace instance.</li>
                                    <li><code>flag</code>: The linker flag to add.</li>
                                </ul>
                            </div>
                            <div class="api-returns">
                                <h4>Returns:</h4>
                                <p><code>true</code> if the flag was added successfully, <code>false</code> otherwise.</p>
                            </div>
                            <div class="api-example">
                                <h4>Example:</h4>
                                <pre><code>ib_add_linker_flag(ws, <span class="string">"-static"</span>);</code></pre>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Output Configuration -->
                <div id="output" class="faq-section api-section">
                    <h2>Output Configuration</h2>
                    
                    <div class="faq-item api-function-item">
                        <div class="faq-question">
                            <h3>ib_set_output</h3>
                            <p class="api-brief">Sets the name of the output executable or library.</p>
                            <span class="faq-toggle"></span>
                        </div>
                        <div class="faq-answer">
                            <pre class="function-signature"><code>void ib_set_output(ib_workspace_t workspace, const char* output_name)</code></pre>
                            <div class="api-params">
                                <h4>Parameters:</h4>
                                <ul>
                                    <li><code>workspace</code>: The workspace instance.</li>
                                    <li><code>output_name</code>: The name of the output file.</li>
                                </ul>
                            </div>
                            <div class="api-example">
                                <h4>Example:</h4>
                                <pre><code>ib_set_output(ws, <span class="string">"my_program"</span>);</code></pre>
                            </div>
                        </div>
                    </div>

                    <div class="faq-item api-function-item">
                        <div class="faq-question">
                            <h3>ib_set_output_dir</h3>
                            <p class="api-brief">Sets the directory for output files.</p>
                            <span class="faq-toggle"></span>
                        </div>
                        <div class="faq-answer">
                            <pre class="function-signature"><code>void ib_set_output_dir(ib_workspace_t workspace, const char* output_dir)</code></pre>
                            <div class="api-params">
                                <h4>Parameters:</h4>
                                <ul>
                                    <li><code>workspace</code>: The workspace instance.</li>
                                    <li><code>output_dir</code>: The directory for output files.</li>
                                </ul>
                            </div>
                            <div class="api-example">
                                <h4>Example:</h4>
                                <pre><code>ib_set_output_dir(ws, <span class="string">"build"</span>);</code></pre>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Logging and Debugging -->
                <div id="logging" class="faq-section api-section">
                    <h2>Logging and Debugging</h2>
                    
                    <div class="faq-item api-function-item">
                        <div class="faq-question">
                            <h3>ib_set_log_level</h3>
                            <p class="api-brief">Sets the log level for the build process.</p>
                            <span class="faq-toggle"></span>
                        </div>
                        <div class="faq-answer">
                            <pre class="function-signature"><code>void ib_set_log_level(ib_workspace_t workspace, ib_log_level_t level)</code></pre>
                            <div class="api-params">
                                <h4>Parameters:</h4>
                                <ul>
                                    <li><code>workspace</code>: The workspace instance.</li>
                                    <li><code>level</code>: The log level (IB_LOG_NONE, IB_LOG_ERROR, IB_LOG_WARNING, IB_LOG_INFO, IB_LOG_DEBUG).</li>
                                </ul>
                            </div>
                            <div class="api-example">
                                <h4>Example:</h4>
                                <pre><code>ib_set_log_level(ws, IB_LOG_DEBUG);</code></pre>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Error Handling -->
                <div id="error-handling" class="faq-section api-section">
                    <h2>Error Handling</h2>
                    
                    <div class="faq-item api-function-item">
                        <div class="faq-question">
                            <h3>ib_get_last_error</h3>
                            <p class="api-brief">Gets the last error message from the workspace.</p>
                            <span class="faq-toggle"></span>
                        </div>
                        <div class="faq-answer">
                            <pre class="function-signature"><code>const char* ib_get_last_error(ib_workspace_t workspace)</code></pre>
                            <div class="api-params">
                                <h4>Parameters:</h4>
                                <ul>
                                    <li><code>workspace</code>: The workspace instance.</li>
                                </ul>
                            </div>
                            <div class="api-returns">
                                <h4>Returns:</h4>
                                <p>A string containing the last error message, or NULL if no error has occurred.</p>
                            </div>
                            <div class="api-example">
                                <h4>Example:</h4>
                                <pre><code><span class="keyword">if</span> (!ib_build(ws)) {
    printf(<span class="string">"Build failed: %s\n"</span>, ib_get_last_error(ws));
}</code></pre>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="cta-section">
        <!-- CTA will be loaded here by JavaScript -->
    </section>

    <footer>
        <div class="container">
            <div class="footer-logo">
                <a href="../index.html">
                    <span class="include">#include</span><span class="build">"build.h"</span>
                </a>
                <p class="footer-tagline">The only build system that feels like part of the language</p>
            </div>
            <div class="footer-links">
                <div class="footer-column">
                    <h4>Product</h4>
                    <ul>
                        <li><a href="../index.html#features">Features</a></li>
                        <li><a href="../index.html#comparison">Comparison</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h4>Resources</h4>
                    <ul>
                        <li><a href="../index.html#get-started">Quick Start</a></li>
                        <li><a href="../index.html#docs">Documentation</a></li>
                        <li><a href="../index.html#docs">User Guide</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h4>Community</h4>
                    <ul>
                        <li><a href="https://github.com/korzewarrior/includebuild/discussions">Discussions</a></li>
                        <li><a href="https://github.com/korzewarrior/includebuild/blob/main/CONTRIBUTING.md">Contributing</a></li>
                        <li><a href="mailto:build@includebuild.com">build@includebuild.com</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 IncludeBuild. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script src="../js/main.js"></script>
    <script>
        // Load the CTA section
        document.addEventListener('DOMContentLoaded', function() {
            const ctaSection = document.querySelector('.cta-section');
            fetch('../includes/cta.html')
                .then(response => response.text())
                .then(html => {
                    // Update relative paths for subdirectory
                    html = html.replace(/href="(?!https?:\/\/)(?!#)([^"]+)"/g, function(match, p1) {
                        if (p1.startsWith('../') || p1.startsWith('http')) {
                            return match;
                        }
                        return 'href="../' + p1 + '"';
                    });
                    ctaSection.innerHTML = html;
                })
                .catch(error => {
                    console.error('Error loading CTA section:', error);
                });
        });
        
        // Handle category tabs
        document.addEventListener('DOMContentLoaded', function() {
            const categories = document.querySelectorAll('.faq-category');
            
            categories.forEach(category => {
                category.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    // Remove active class from all categories
                    categories.forEach(c => c.classList.remove('active'));
                    
                    // Add active class to clicked category
                    this.classList.add('active');
                    
                    // Hide all sections
                    const sections = document.querySelectorAll('.faq-section');
                    sections.forEach(s => s.classList.remove('active'));
                    
                    // Show the corresponding section
                    const sectionId = this.getAttribute('data-section');
                    document.getElementById(sectionId).classList.add('active');
                });
            });
            
            // Make the entire question header clickable, not just the toggle
            const questionHeaders = document.querySelectorAll('.faq-question');
            questionHeaders.forEach(header => {
                header.addEventListener('click', function() {
                    const item = this.closest('.faq-item');
                    item.classList.toggle('active');
                });
            });
        });
    </script>
</body>
</html> 